<% tab 'calendar' %>
<% title 'Office Calendar' %>


<%= render partial: "shared/header/#{@ui_space}_header"%>

<div id="global-content-wrapper">
    <!-- calendar -->
  <div class="row no-gutters">
    <div class="lp__scroll_containers">
      <div class="lp__fixed f2 comp__om_calendar">
        <div class="col-6 col-md-12 col-xl-10 mt-4 mb-5 ml-auto mr-auto">
          <a class="btn btn-success btn-block px-0" data-modal-size="md" data-modal="true" href="/office/office_exclude_dates" data-modal-title="">Exclude Dates</a>
        </div>
        <div class="col-12">
          <div class="calendar-key">
            <h3>Key</h3>
          </div>
        </div>
        <div class="col-12 row m-0">
          <div class="calendar-key col-6 p-0">
            <ul>
                <li>BR: Breakfast</li>
                <li>LU: Lunch</li>
                <li>SN: Snack</li>
                <li>RX: Sample</li>
                <li>DN: Dinner</li>
            </ul>
          </div>
          <div class="calendar-key col-6 p-0">
            <ul>
                <li class="open"><i class="key-color"></i>Open</li>
                <li class="booked"><i class="key-color"></i>Booked</li>
                <li class="confirmed"><i class="key-color"></i>Confirmed</li>
                <li class="current-pending"><i class="key-color"></i>Pending</li>
            </ul>
          </div>
        </div>
        <div class="col-md-12 comp__filters mt-5">
          <h3 class="mt-4 pb-1">Filters
            <hr class="mt-1 mb-0">
          </h3>
          <p class="mt-0">Expected Providers:</p>
          <ul class="m-0">
            <% @office.providers.select{|p| p.active?}.each do |provider| %>
              <li>
                <button class="lp__filters_provider" href="#" data-toggleable=true data-off-value="<%= provider.id%>"><%= provider.display_name %></button>
              </li>
            <% end %>
          </ul>
          <p class="mt-3 small">Selecting multiple providers will filter for slots when all are available. </p>
        </div>
      </div>

      <div class="col-12 col-md-10 p-0">
        <section id="om-calendar" class="pb-4">
          <div id="calendar" data-availability="<%=@office.week_availability%>" data-calendar-until="<%=simple_date(@office.appointments_until, 'Set Date')%>"
            data-min-time="<%=@min_time%>" data-max-time="<%=@max_time%>"></div>
        </section>
      </div>
    </div>
  </div>
</div>
